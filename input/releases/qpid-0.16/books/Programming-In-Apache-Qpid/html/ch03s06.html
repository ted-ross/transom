<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>3.6. Configuring the JMS Client</title><link rel="stylesheet" type="text/css" href="css/style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="Programming in Apache Qpid"><link rel="up" href="QpidJMS.html" title="Chapter 3. Using the Qpid JMS client"><link rel="prev" href="section-JMS-Logging.html" title="3.5. JMS Client Logging"><link rel="next" href="QpidWCF.html" title="Chapter 4. Using the Qpid WCF client"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.6. Configuring the JMS Client</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="section-JMS-Logging.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Using the Qpid JMS client</th><td width="20%" align="right"> <a accesskey="n" href="QpidWCF.html">Next</a></td></tr></table><hr></div><div class="section" title="3.6. Configuring the JMS Client"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp32963136"></a>3.6. Configuring the JMS Client</h2></div></div></div><p>The Qpid JMS Client allows several configuration options to customize it's behaviour at different levels of granualarity.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            JVM level using JVM arguments : Configuration that affects all connections, sessions, consumers and producers created within that JVM.
	  </p><p>Ex. <code class="varname">-Dmax_prefetch=1000</code> property specifies the message credits to use.</p></li><li class="listitem"><p>
            Connection level using Connection/Broker properties : Affects the respective connection and sessions, consumers and produces created by that connection.
	  </p><p>Ex. <code class="varname">amqp://guest:guest@test/test?max_prefetch='1000'
	  &amp;brokerlist='tcp://localhost:5672'
	  </code> property specifies the message credits to use. This overrides any value specified via the JVM argument <code class="varname">max_prefetch</code>.</p><p>Please refer to the <a class="xref" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Section 3.2.2, “Connection URLs”</a> section for a complete list of all properties and how to use them.</p></li><li class="listitem"><p>
            Destination level using Addressing options : Affects the producer(s) and consumer(s) created using the respective destination.
	  </p><p>Ex. <code class="varname">my-queue; {create: always, link:{capacity: 10}}</code>, where <code class="varname">capacity</code> option specifies the message credits to use. This overrides any connection level configuration.</p><p>Please refer to the <a class="xref" href="section-addresses.html" title="2.4. Addresses">Section 2.4, “Addresses”</a> section for a complete understanding of addressing and it's various options.</p></li></ul></div><p>Some of these config options are available at all three levels (Ex. <code class="varname">max_prefetch</code>), while others are available only at JVM or connection level.</p><div class="section" title="3.6.1. Qpid JVM Arguments"><div class="titlepage"><div><div><h3 class="title"><a name="client-jvm-properties"></a>3.6.1. Qpid JVM Arguments</h3></div></div></div><div class="table"><a name="idp32974688"></a><p class="title"><b>Table 3.6. Config Options For Connection Behaviour</b></p><div class="table-contents"><table summary="Config Options For Connection Behaviour" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>qpid.amqp.version</td><td>string</td><td>0-10</td><td><p>Sets the AMQP version to be used - currently supports one of {0-8,0-9,0-91,0-10}.</p><p>The client will begin negotiation at the specified version and only negotiate downwards if the Broker does not support the specified version.</p></td></tr><tr><td>qpid.heartbeat</td><td>int</td><td>120 (secs)</td><td>The heartbeat interval in seconds. Two consective misssed heartbeats will result in the connection timing out.<p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr><tr><td>ignore_setclientID</td><td>boolean</td><td>false</td><td>If a client ID is specified in the connection URL it's used or else an ID is generated. If an ID is specified after it's been set Qpid will throw an exception. <p>Setting this property to 'true' will disable that check and allow you to set a client ID of your choice later on.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp32986736"></a><p class="title"><b>Table 3.7. Config Options For Session Behaviour</b></p><div class="table-contents"><table summary="Config Options For Session Behaviour" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>qpid.session.command_limit</td><td>int</td><td>65536</td><td>Limits the # of unacked commands</td></tr><tr><td>qpid.session.byte_limit</td><td>int</td><td>1048576</td><td>Limits the # of unacked commands in terms of bytes</td></tr><tr><td>qpid.use_legacy_map_message</td><td>boolean</td><td>false</td><td><p>If set will use the old map message encoding. By default the Map messages are encoded using the 0-10 map encoding.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr><tr><td>qpid.jms.daemon.dispatcher</td><td>boolean</td><td>false</td><td><p>Controls whether the Session dispatcher thread is a daemon thread or not. If this system property is set to true then the Session dispatcher threads will be created as daemon threads. This setting is introduced in version 0.16.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33000000"></a><p class="title"><b>Table 3.8. Config Options For Consumer Behaviour</b></p><div class="table-contents"><table summary="Config Options For Consumer Behaviour" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>max_prefetch</td><td>int</td><td>500</td><td>Maximum number of pre-fetched messages per consumer. <p>This can also be defaulted for consumers created on a particular connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options, or per destination (see the <code class="varname">capacity</code> option under link properties in addressing)</p></td></tr><tr><td>qpid.session.max_ack_delay</td><td>long</td><td>1000 (ms)</td><td><p>Timer interval to flush message acks in buffer when using AUTO_ACK and DUPS_OK.</p> <p>When using the above ack modes, message acks are batched and sent if one of the following conditions are met (which ever happens first).
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>When the ack timer fires.</p></li><li class="listitem"><p>if un_acked_msg_count &gt; max_prefetch/2.</p></li></ul></div><p>
	      </p>
	      <p>The ack timer can be disabled by setting it to 0.</p>
		</td></tr><tr><td>sync_ack</td><td>boolean</td><td>false</td><td><p>If set, each message will be acknowledged synchronously. When using AUTO_ACK mode, you need to set this to "true", in order to get the correct behaviour as described by the JMS spec.</p><p>This is set to false by default for performance reasons, therefore by default AUTO_ACK behaves similar to DUPS_OK.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33015472"></a><p class="title"><b>Table 3.9. Config Options For Producer Behaviour</b></p><div class="table-contents"><table summary="Config Options For Producer Behaviour" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>sync_publish</td><td>string</td><td>"" (disabled)</td><td><p>If one of {persistent|all} is set then persistent messages or all messages will be sent synchronously.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33022592"></a><p class="title"><b>Table 3.10. Config Options For Threading</b></p><div class="table-contents"><table summary="Config Options For Threading" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>qpid.thread_factory</td><td>string</td><td>org.apache.qpid.thread.DefaultThreadFactory</td><td><p>Specifies the thread factory to use.</p><p>If using a real time JVM, you need to set the above property to <code class="varname">org.apache.qpid.thread.RealtimeThreadFactory</code>.</p></td></tr><tr><td>qpid.rt_thread_priority</td><td>int</td><td>20</td><td><p>Specifies the priority (1-99) for Real time threads created by the real time thread factory.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33031600"></a><p class="title"><b>Table 3.11. Config Options For I/O</b></p><div class="table-contents"><table summary="Config Options For I/O" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>qpid.transport</td><td>string</td><td>org.apache.qpid.transport.network.io.IoNetworkTransport</td><td><p>The transport implementation to be used.</p><p>A user could specify an alternative transport mechanism that implements the interface <code class="varname">org.apache.qpid.transport.network.OutgoingNetworkTransport</code>.</p></td></tr><tr><td>qpid.sync_op_timeout</td><td>long</td><td>60000</td><td><p>The length of time (in milliseconds) to wait for a synchronous operation to complete.</p><p>For compatibility with older clients, the synonym <code class="varname">amqj.default_syncwrite_timeout</code> is supported.</p></td></tr><tr><td>qpid.tcp_nodelay</td><td>boolean</td><td>true</td><td>
		  <p>Sets the TCP_NODELAY property of the underlying socket. The default was changed to true as of Qpid 0.14.</p>
		  <p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p>
		  <p>For compatibility with older clients, the synonym <code class="varname">amqj.tcp_nodelay</code> is supported.</p>
		</td></tr><tr><td>qpid.send_buffer_size</td><td>integer</td><td>65535</td><td>
		  <p>Sets the SO_SNDBUF property of the underlying socket. Added in Qpid 0.16.</p>
		  <p>For compatibility with older clients, the synonym <code class="varname">amqj.sendBufferSize</code> is supported.</p>
		</td></tr><tr><td>qpid.receive_buffer_size</td><td>integer</td><td>65535</td><td>
		  <p>Sets the SO_RCVBUF property of the underlying socket. Added in Qpid 0.16.</p>
		  <p>For compatibility with older clients, the synonym <code class="varname">amqj.receiveBufferSize</code> is supported.</p>
		</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33051872"></a><p class="title"><b>Table 3.12. Config Options For Security</b></p><div class="table-contents"><table summary="Config Options For Security" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>qpid.sasl_mechs</td><td>string</td><td>PLAIN</td><td><p>The SASL mechanism to be used. More than one could be specified as a comma separated list.</p><p>We currently support the following mechanisms {PLAIN | GSSAPI | EXTERNAL}.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr><tr><td>qpid.sasl_protocol</td><td>string</td><td>AMQP</td><td><p>When using GSSAPI as the SASL mechanism, <code class="varname">sasl_protocol</code> must be set to the principal for the qpidd broker, e.g. <code class="varname">qpidd</code>.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr><tr><td>qpid.sasl_server_name</td><td>string</td><td>localhost</td><td><p>When using GSSAPI as the SASL mechanism, <code class="varname">sasl_server</code> must be set to the host for the SASL server, e.g. <code class="varname">example.com</code>.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33066816"></a><p class="title"><b>Table 3.13. Config Options For Security - Standard JVM properties needed when using GSSAPI as the SASL mechanism.<sup>[<a name="idp33067440" href="#ftn.idp33067440" class="footnote">a</a>]</sup></b></p><div class="table-contents"><table summary="Config Options For Security - Standard JVM properties needed when using GSSAPI as the SASL mechanism.Please refer to the Java security documentation for a complete understanding of the above properties." border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>javax.security.auth.useSubjectCredsOnly</td><td>boolean</td><td>true</td><td><p>If set to 'false', forces the SASL GASSPI client to obtain the kerberos credentials explicitly instead of obtaining from the "subject" that owns the current thread.</p></td></tr><tr><td>java.security.auth.login.config</td><td>string</td><td> </td><td><p>Specifies the jass configuration file.</p><p><code class="varname">Ex-Djava.security.auth.login.config=myjas.conf</code>
		</p><p>Here is the sample myjas.conf JASS configuration file: </p><pre class="programlisting">

		com.sun.security.jgss.initiate {
		com.sun.security.auth.module.Krb5LoginModule required useTicketCache=true;
		};

		</pre></td></tr></tbody><tbody class="footnotes"><tr><td colspan="4"><div class="footnote"><p><sup>[<a id="ftn.idp33067440" href="#idp33067440" class="para">a</a>] </sup>Please refer to the Java security documentation for a complete understanding of the above properties.</p></div></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33077136"></a><p class="title"><b>Table 3.14. Config Options For Security - Using SSL for securing connections or using EXTERNAL as the SASL mechanism.</b></p><div class="table-contents"><table summary="Config Options For Security - Using SSL for securing connections or using EXTERNAL as the SASL mechanism." border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>qpid.ssl_timeout</td><td>long</td><td>60000</td><td><p>Timeout value used by the Java SSL engine when waiting on operations.</p></td></tr><tr><td>qpid.ssl.KeyManagerFactory.algorithm</td><td>string</td><td>-</td><td>
		  <p>The key manager factory algorithm name. If not set, defaults to the value returned from the Java runtime call <code class="literal">KeyManagerFactory.getDefaultAlgorithm()</code></p>
		  <p>For compatibility with older clients, the synonym <code class="varname">qpid.ssl.keyStoreCertType</code> is supported.</p>
		</td></tr><tr><td>qpid.ssl.TrustManagerFactory.algorithm</td><td>string</td><td>-</td><td>
		  <p>The trust manager factory algorithm name. If not set, defaults to the value returned from the Java runtime call <code class="literal">TrustManagerFactory.getDefaultAlgorithm()</code></p>
		  <p>For compatibility with older clients, the synonym <code class="varname">qpid.ssl.trustStoreCertType</code> is supported.</p>
		</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="idp33090784"></a><p class="title"><b>Table 3.15. Config Options For Security - Standard JVM properties needed when Using SSL for securing connections or using EXTERNAL as the SASL mechanism.<sup>[<a name="idp33091456" href="#ftn.idp33091456" class="footnote">a</a>]</sup></b></p><div class="table-contents"><table summary="Config Options For Security - Standard JVM properties needed when Using SSL for securing connections or using EXTERNAL as the SASL mechanism.Qpid allows you to have per connection key and trust stores if required. If specified per connection, the JVM arguments are ignored." border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Property Name</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td>javax.net.ssl.keyStore</td><td>string</td><td>jvm default</td><td><p>Specifies the key store path.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr><tr><td>javax.net.ssl.keyStorePassword</td><td>string</td><td>jvm default</td><td><p>Specifies the key store password.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr><tr><td>javax.net.ssl.trustStore</td><td>string</td><td>jvm default</td><td><p>Specifies the trust store path.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr><tr><td>javax.net.ssl.trustStorePassword</td><td>string</td><td>jvm default</td><td><p>Specifies the trust store password.</p><p>This can also be set per connection using the <a class="link" href="QpidJNDI.html#section-jms-connection-url" title="3.2.2. Connection URLs">Connection URL</a> options.</p></td></tr></tbody><tbody class="footnotes"><tr><td colspan="4"><div class="footnote"><p><sup>[<a id="ftn.idp33091456" href="#idp33091456" class="para">a</a>] </sup>Qpid allows you to have per connection key and trust stores if required. If specified per connection, the JVM arguments are ignored.</p></div></td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="section-JMS-Logging.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="QpidJMS.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="QpidWCF.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.5. JMS Client Logging </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 4. Using the Qpid WCF client</td></tr></table></div></body></html>
